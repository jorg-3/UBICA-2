<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DesafÃ­os Diarios</title>
  <link rel="icon" type="image/png" href="../images/Logo-corto.png">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo-text">UBICA-2</a>
      <ul class="nav-links">
        <li><a href="index.html" className="back-button">ğŸ¡Volver al inicio</a></li>
        <li><a href="emociones.html" aria-label="Acceder a la navegaciÃ³n emocional">ğŸ§­ NavegaciÃ³n emocional</a></li>
        <li><a href="rutas-tiempo-real.html" aria-label="Acceder a rutas en tiempo real">ğŸ“ Rutas en tiempo real</a></li>
        <li><a href="foro.html" aria-current="page" aria-label="Acceder al foro">ğŸ’¬ Foro</a></li>
        <li><a href="desafio.html" aria-label="Acceder a desafÃ­os diarios">ğŸ¯ DesafÃ­os diarios</a></li>
        <li><a href="iniciar-sesion.html" id="nav-login-btn" aria-label="Iniciar sesiÃ³n">ğŸ‘¤ Inicia SesiÃ³n</a></li>
      </ul>
    </div>
  </nav>

  <header class="quienes-banner">
    <h1> DesafÃ­os Diarios</h1>
  </header>

  <section class="challenges-section">
    <div class="challenges-container">
      <div class="cards">
        <div class="card" data-challenge-id="1">
          <h3>ğŸŒ¿ Caminata consciente</h3>
          <p>Da un paseo de 15 minutos prestando atenciÃ³n plena a los sonidos, olores y colores a tu alrededor.</p>
          <div class="icon-buttons">
            <span class="tick">âœ…</span>
            <span class="cross">âŒ</span>
          </div>
        </div>

        <div class="card" data-challenge-id="2">
          <h3>ğŸ“¸ Captura un momento</h3>
          <p>Toma una foto de algo que te inspire hoy. Puede ser una flor, una sonrisa o una vista inesperada.</p>
          <div class="icon-buttons">
            <span class="tick">âœ…</span>
            <span class="cross">âŒ</span>
          </div>
        </div>

        <div class="card" data-challenge-id="3">
          <h3>ğŸ“ Diario de gratitud</h3>
          <p>Escribe tres cosas por las que estÃ¡s agradecido/a hoy. Puede ser algo simple pero significativo.</p>
          <div class="icon-buttons">
            <span class="tick">âœ…</span>
            <span class="cross">âŒ</span>
          </div>
        </div>

        <div class="card" data-challenge-id="4">
          <h3>ğŸ’§ HidrÃ¡tate y respira</h3>
          <p>Bebe un vaso de agua y haz 3 respiraciones profundas. A veces lo simple es lo mÃ¡s poderoso.</p>
          <div class="icon-buttons">
            <span class="tick">âœ…</span>
            <span class="cross">âŒ</span>
          </div>
        </div>
      </div>
      <div class="calendar">
        <div class="calendar-header">
          <h3>Mayo 2025</h3>
        </div>
        <div class="calendar-grid" id="calendar-grid"></div>
      </div>
      <!-- <div class="calendar-container">
        <div class="calendar">
          <div class="calendar-header">
            <h3>Mayo 2025</h3>
          </div>
          <div class="calendar-grid" id="calendar-grid"></div>
        </div>
      </div> -->
    </div>
  </section>

  <div id="loading-overlay">
    <div class="logo-wrapper">
      <img src="../images/Logo-corto.png" alt="Logo de carga">
      <div class="orbiter">
        <div class="orb"></div>
      </div>
    </div>
  </div>

  <div class="footer-transition"></div>
  <footer class="footer">
    <div class="footer-left">
      <div class="store-badges">
        <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.maps" target="_blank" rel="noopener noreferrer">
          <img src="../images/googleplay-ES.svg" alt="Disponible en Google Play">
        </a>
        <a href="https://apps.apple.com/app/id585027354" target="_blank" rel="noopener noreferrer">
          <img src="../images/appstore-ES.svg" alt="Disponible en App Store">
        </a>
      </div>
    </div>
    <div class="footer-right">
      <p>
        <a href="quienes-somos.html" class="footer-link">QuiÃ©nes somos</a> | 
        Â© 2025 UBICA-2. Todos los derechos reservados.
      </p>
    </div>
  </footer>

  <script src="scripts.js"></script>
  <script>
    // Ocultar el overlay de carga
    window.addEventListener('load', () => {
      const overlay = document.getElementById('loading-overlay');
      setTimeout(() => {
        overlay.style.opacity = '0';
        setTimeout(() => {
          overlay.style.display = 'none';
        }, 1000);
      }, 2000);
    });

        // Datos precargados de desafÃ­os para todo mayo 2025
        const challengesByDate = {
      '2025-05-01': [
        { id: 1, title: 'ğŸŒ³ Toca la naturaleza', description: 'Toca un Ã¡rbol o planta y describe su textura en tu mente.' },
        { id: 2, title: 'ğŸ˜Š Acto de bondad', description: 'Haz un pequeÃ±o gesto amable por alguien, como un cumplido.' },
        { id: 3, title: 'ğŸ“– Lee con calma', description: 'Lee 5 pÃ¡ginas de un libro que te guste, sin prisas.' }
      ],
      '2025-05-02': [
        { id: 4, title: 'ğŸ§˜ Estiramiento matutino', description: 'Haz 5 minutos de estiramientos suaves al despertar.' },
        { id: 5, title: 'ğŸ Snack saludable', description: 'Come una fruta o verdura como merienda hoy.' },
        { id: 6, title: 'âœï¸ Idea creativa', description: 'Escribe una idea creativa que se te ocurra hoy.' }
      ],
      '2025-05-03': [
        { id: 7, title: 'ğŸŒ… Mira el amanecer', description: 'Observa el amanecer y aprecia los colores del cielo.' },
        { id: 8, title: 'ğŸ’¬ Conversa', description: 'Habla con alguien sobre algo que te apasione.' },
        { id: 9, title: 'ğŸ§¹ Ordena un espacio', description: 'Organiza un cajÃ³n o estante pequeÃ±o.' },
        { id: 10, title: 'ğŸ¶ Escucha con atenciÃ³n', description: 'Escucha una canciÃ³n prestando atenciÃ³n a cada instrumento.' }
      ],
      '2025-05-04': [
        { id: 11, title: 'â˜• Pausa consciente', description: 'TÃ³mate 5 minutos para disfrutar de una bebida en silencio.' },
        { id: 12, title: 'ğŸŒ¸ Olor del dÃ­a', description: 'Encuentra una flor o planta y respira su aroma.' },
        { id: 13, title: 'ğŸ“ Meta pequeÃ±a', description: 'Escribe una meta alcanzable para esta semana.' }
      ],
      '2025-05-05': [
        { id: 14, title: 'ğŸš¶ Paseo sin destino', description: 'Camina 10 minutos sin un rumbo fijo, solo explorando.' },
        { id: 15, title: 'ğŸ–Œï¸ Dibuja algo', description: 'Haz un dibujo simple, aunque sea un garabato.' },
        { id: 16, title: 'ğŸ’¡ ReflexiÃ³n', description: 'Piensa en algo que aprendiste recientemente.' },
        { id: 17, title: 'ğŸ§¼ Limpieza rÃ¡pida', description: 'Limpia una superficie pequeÃ±a, como tu escritorio.' }
      ],
      '2025-05-06': [
        { id: 18, title: 'ğŸŒ Saludo al sol', description: 'Haz 5 minutos de estiramientos al aire libre.' },
        { id: 19, title: 'ğŸ“š Lee algo nuevo', description: 'Lee un artÃ­culo o capÃ­tulo que te intrigue.' },
        { id: 20, title: 'ğŸ™ Gratitud silenciosa', description: 'Piensa en alguien por quien estÃ©s agradecido/a.' }
      ],
      '2025-05-07': [
        { id: 21, title: 'ğŸµ TÃ© consciente', description: 'Prepara y bebe un tÃ© o infusiÃ³n con atenciÃ³n plena.' },
        { id: 22, title: 'ğŸŒ Explora tu entorno', description: 'Observa un detalle nuevo en tu vecindario.' },
        { id: 23, title: 'ğŸ“· Foto creativa', description: 'Toma una foto desde un Ã¡ngulo inusual.' },
        { id: 24, title: 'ğŸ§  Ejercicio mental', description: 'Resuelve un acertijo o sudoku corto.' }
      ],
      '2025-05-08': [
        { id: 25, title: 'ğŸ§˜â€â™€ï¸ RespiraciÃ³n profunda', description: 'Haz 10 respiraciones profundas, contando cada una.' },
        { id: 26, title: 'ğŸ“ Lista de sueÃ±os', description: 'Escribe 3 cosas que te gustarÃ­a hacer algÃºn dÃ­a.' },
        { id: 27, title: 'ğŸŒ¿ Planta amiga', description: 'Riega o cuida una planta con cariÃ±o.' }
      ],
      '2025-05-09': [
        { id: 28, title: 'ğŸš´ MuÃ©vete', description: 'Haz 15 minutos de actividad fÃ­sica, como caminar o bailar.' },
        { id: 29, title: 'ğŸ¨ ExpresiÃ³n artÃ­stica', description: 'Crea algo con tus manos: un dibujo, manualidad, etc.' },
        { id: 30, title: 'ğŸ“– Historia corta', description: 'Lee o escribe una historia breve.' },
        { id: 31, title: 'ğŸ’Œ Mensaje amable', description: 'EnvÃ­a un mensaje positivo a un amigo.' }
      ],
      '2025-05-10': [
        { id: 32, title: 'ğŸŒ™ Noche estrellada', description: 'Observa las estrellas o la luna por 5 minutos.' },
        { id: 33, title: 'ğŸ§¹ Orden interior', description: 'Organiza un espacio personal, como tu bolso.' },
        { id: 34, title: 'ğŸµ Playlist del dÃ­a', description: 'Crea una lista de 3 canciones que te animen.' }
      ],
      '2025-05-11': [
        { id: 35, title: 'ğŸŒ Yoga suave', description: 'Prueba 10 minutos de yoga o estiramientos.' },
        { id: 36, title: 'ğŸ“ ReflexiÃ³n semanal', description: 'Escribe cÃ³mo te sentiste esta semana.' },
        { id: 37, title: 'ğŸ“ Sabor consciente', description: 'Come una fruta saboreÃ¡ndola lentamente.' },
        { id: 38, title: 'ğŸ“¸ Detalle pequeÃ±o', description: 'FotografÃ­a un objeto pequeÃ±o que te llame la atenciÃ³n.' }
      ],
      '2025-05-12': [
        { id: 39, title: 'â˜• Momento de pausa', description: 'TÃ³mate 5 minutos para disfrutar de una bebida caliente en silencio.' },
        { id: 40, title: 'âœï¸ ReflexiÃ³n rÃ¡pida', description: 'Escribe una cosa que aprendiste hoy.' }
      ],
      '2025-05-13': [
        { id: 41, title: 'ğŸŒ¿ Caminata consciente', description: 'Da un paseo de 15 minutos prestando atenciÃ³n plena a los sonidos, olores y colores a tu alrededor.' },
        { id: 42, title: 'ğŸ“¸ Captura un momento', description: 'Toma una foto de algo que te inspire hoy. Puede ser una flor, una sonrisa o una vista inesperada.' },
        { id: 43, title: 'ğŸ“ Diario de gratitud', description: 'Escribe tres cosas por las que estÃ¡s agradecido/a hoy. Puede ser algo simple pero significativo.' },
        { id: 44, title: 'ğŸ’§ HidrÃ¡tate y respira', description: 'Bebe un vaso de agua y haz 3 respiraciones profundas. A veces lo simple es lo mÃ¡s poderoso.' }
      ],
      '2025-05-14': [
        { id: 45, title: 'ğŸŒ„ Atardecer', description: 'Observa el atardecer y describe sus colores.' },
        { id: 46, title: 'ğŸ“ Lista de logros', description: 'Escribe 3 cosas que hayas logrado esta semana.' },
        { id: 47, title: 'ğŸ§˜ MeditaciÃ³n breve', description: 'Medita durante 5 minutos en silencio.' }
      ],
      '2025-05-15': [
        { id: 48, title: 'ğŸµ Sabor nuevo', description: 'Prueba un alimento o bebida que no hayas probado antes.' },
        { id: 49, title: 'ğŸŒ³ ConexiÃ³n natural', description: 'Pasa 10 minutos en un parque o jardÃ­n.' },
        { id: 50, title: 'ğŸ“· Foto en blanco y negro', description: 'Toma una foto en blanco y negro de algo interesante.' },
        { id: 51, title: 'ğŸ“š Aprende una palabra', description: 'Busca y aprende el significado de una palabra nueva.' }
      ],
      '2025-05-16': [
        { id: 52, title: 'ğŸ§˜â€â™‚ï¸ Estiramiento nocturno', description: 'Haz 5 minutos de estiramientos antes de dormir.' },
        { id: 53, title: 'ğŸ“ Carta a ti', description: 'Escribe una carta corta a tu yo futuro.' },
        { id: 54, title: 'ğŸ¶ CanciÃ³n nostÃ¡lgica', description: 'Escucha una canciÃ³n que te traiga recuerdos.' }
      ],
      '2025-05-17': [
        { id: 55, title: 'ğŸš¶ Explorador urbano', description: 'Camina por una calle que no conoces.' },
        { id: 56, title: 'ğŸŒ¿ Aroma natural', description: 'Huele una hierba o especia y describe su aroma.' },
        { id: 57, title: 'ğŸ“ Idea para maÃ±ana', description: 'Escribe un plan pequeÃ±o para maÃ±ana.' },
        { id: 58, title: 'ğŸ§¼ Ordena tu espacio', description: 'Organiza un Ã¡rea pequeÃ±a de tu casa.' }
      ],
      '2025-05-18': [
        { id: 59, title: 'ğŸŒ Luz natural', description: 'Pasa 10 minutos bajo la luz del sol.' },
        { id: 60, title: 'ğŸ“– Lee poesÃ­a', description: 'Lee un poema y reflexiona sobre su mensaje.' },
        { id: 61, title: 'ğŸ˜Š Sonrisa compartida', description: 'SonrÃ­e a un desconocido hoy.' }
      ],
      '2025-05-19': [
        { id: 62, title: 'ğŸ§˜ RespiraciÃ³n 4-4-4', description: 'Inhala 4 segundos, sostÃ©n 4, exhala 4.' },
        { id: 63, title: 'ğŸ“ Recuerdo feliz', description: 'Escribe un recuerdo que te haga sonreÃ­r.' },
        { id: 64, title: 'ğŸŒ¸ Toca una flor', description: 'Toca una flor y observa sus detalles.' },
        { id: 65, title: 'ğŸ¨ Color del dÃ­a', description: 'Elige un color y busca objetos de ese tono.' }
      ],
      '2025-05-20': [
        { id: 66, title: 'ğŸš´ Actividad divertida', description: 'Haz 15 minutos de una actividad que te guste.' },
        { id: 67, title: 'ğŸ“· Foto de la naturaleza', description: 'FotografÃ­a un elemento natural, como un Ã¡rbol.' },
        { id: 68, title: 'ğŸ“ Gratitud por alguien', description: 'Escribe por quÃ© estÃ¡s agradecido/a por una persona.' }
      ],
      '2025-05-21': [
        { id: 69, title: 'â˜• Desayuno consciente', description: 'Come tu desayuno prestando atenciÃ³n a cada bocado.' },
        { id: 70, title: 'ğŸŒ Sonido del entorno', description: 'Escucha los sonidos a tu alrededor por 5 minutos.' },
        { id: 71, title: 'ğŸ“ Plan de autocuidado', description: 'Escribe una actividad de autocuidado para esta semana.' },
        { id: 72, title: 'ğŸ§¼ Limpieza simbÃ³lica', description: 'Limpia un objeto que uses a diario.' }
      ],
      '2025-05-22': [
        { id: 73, title: 'ğŸŒ Estiramiento al sol', description: 'Haz estiramientos al aire libre por 10 minutos.' },
        { id: 74, title: 'ğŸ“– Aprende algo', description: 'Lee o mira algo educativo por 10 minutos.' },
        { id: 75, title: 'ğŸ’Œ Nota positiva', description: 'Escribe una nota positiva y dÃ©jala para alguien.' }
      ],
      '2025-05-23': [
        { id: 76, title: 'ğŸ§˜ MeditaciÃ³n guiada', description: 'Prueba una meditaciÃ³n guiada de 5 minutos.' },
        { id: 77, title: 'ğŸŒ¿ Cuida una planta', description: 'Riega o limpia las hojas de una planta.' },
        { id: 78, title: 'ğŸ“· Foto abstracta', description: 'Toma una foto que capture una textura o patrÃ³n.' },
        { id: 79, title: 'ğŸ“ Lista de deseos', description: 'Escribe 3 cosas que desees para el futuro.' }
      ],
      '2025-05-24': [
        { id: 80, title: 'ğŸš¶ Paseo con propÃ³sito', description: 'Camina 15 minutos con una intenciÃ³n clara.' },
        { id: 81, title: 'ğŸ¶ MÃºsica relajante', description: 'Escucha mÃºsica tranquila por 10 minutos.' },
        { id: 82, title: 'ğŸ˜Š Ayuda a alguien', description: 'Ofrece ayuda a alguien en una tarea pequeÃ±a.' }
      ],
      '2025-05-25': [
        { id: 83, title: 'ğŸŒ… ReflexiÃ³n al amanecer', description: 'Piensa en tus metas mientras ves el amanecer.' },
        { id: 84, title: 'ğŸ“ Carta de gratitud', description: 'Escribe una carta agradeciendo a alguien.' },
        { id: 85, title: 'ğŸ§˜â€â™€ï¸ Equilibrio', description: 'Practica mantener el equilibrio en una pierna por 30 segundos.' },
        { id: 86, title: 'ğŸ“· Foto de alegrÃ­a', description: 'Captura algo que te haga feliz.' }
      ],
      '2025-05-26': [
        { id: 87, title: 'ğŸ Cocina algo simple', description: 'Prepara una receta fÃ¡cil y saludable.' },
        { id: 88, title: 'ğŸŒ³ Abraza un Ã¡rbol', description: 'Toca o abraza un Ã¡rbol por un momento.' },
        { id: 89, title: 'ğŸ“ Idea innovadora', description: 'Escribe una idea para mejorar algo en tu vida.' }
      ],
      '2025-05-27': [
        { id: 90, title: 'ğŸ§˜ RespiraciÃ³n consciente', description: 'Haz 5 minutos de respiraciones lentas y profundas.' },
        { id: 91, title: 'ğŸ“– Lee inspiraciÃ³n', description: 'Lee una cita o texto que te motive.' },
        { id: 92, title: 'ğŸŒ¸ Detalle natural', description: 'Observa una hoja o flor con atenciÃ³n.' },
        { id: 93, title: 'ğŸ’¬ Comparte una historia', description: 'CuÃ©ntale una anÃ©cdota a alguien.' }
      ],
      '2025-05-28': [
        { id: 94, title: 'ğŸš´ Ejercicio ligero', description: 'Haz 10 minutos de ejercicio suave, como caminar.' },
        { id: 95, title: 'ğŸ“ ReflexiÃ³n nocturna', description: 'Escribe cÃ³mo te sentiste hoy antes de dormir.' },
        { id: 96, title: 'ğŸ¶ CanciÃ³n favorita', description: 'Escucha tu canciÃ³n favorita y canta si quieres.' }
      ],
      '2025-05-29': [
        { id: 97, title: 'ğŸŒ Luz matutina', description: 'Abre una ventana y deja entrar la luz del dÃ­a.' },
        { id: 98, title: 'ğŸ“· Foto urbana', description: 'Toma una foto de algo interesante en la ciudad.' },
        { id: 99, title: 'ğŸ“ Lista de fortalezas', description: 'Escribe 3 cosas en las que eres bueno/a.' },
        { id: 100, title: 'ğŸ§¼ Ordena un rincÃ³n', description: 'Organiza un espacio pequeÃ±o, como una mesa.' }
      ],
      '2025-05-30': [
        { id: 101, title: 'ğŸ§˜â€â™‚ï¸ MeditaciÃ³n al aire libre', description: 'Medita 5 minutos en un lugar tranquilo afuera.' },
        { id: 102, title: 'ğŸŒ¿ Aromaterapia casera', description: 'Huele una fruta cÃ­trica o hierba fresca.' },
        { id: 103, title: 'ğŸ“ Meta del mes', description: 'Escribe una meta para el prÃ³ximo mes.' }
      ],
      '2025-05-31': [
        { id: 104, title: 'ğŸŒ„ Cierra el mes', description: 'Reflexiona sobre lo que lograste en mayo.' },
        { id: 105, title: 'ğŸ˜Š Comparte gratitud', description: 'Agradece a alguien por su apoyo este mes.' },
        { id: 106, title: 'ğŸ“· Foto final', description: 'Toma una foto que resuma tu mes.' },
        { id: 107, title: 'ğŸ¶ Celebra con mÃºsica', description: 'Baila o escucha una canciÃ³n que te alegre.' }
      ]
    };
    // Generar calendario
    function generateCalendar() {
      const calendarGrid = document.getElementById('calendar-grid');
      const today = new Date('2025-05-13');
      const year = today.getFullYear();
      const month = today.getMonth();
      const currentDay = today.getDate();

      // Primer dÃ­a del mes
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      // DÃ­as de la semana
      const weekdays = ['Lun', 'Mar', 'MiÃ©', 'Jue', 'Vie', 'SÃ¡b', 'Dom'];  // He movido el domingo al final que me daba toc jaajaj
      weekdays.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.className = 'calendar-day-header';
        dayHeader.textContent = day;
        calendarGrid.appendChild(dayHeader);
      });

      // Espacios vacÃ­os antes del primer dÃ­a
      for (let i = 0; i < (firstDay === 0 ? 6 : firstDay - 1); i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day empty';
        calendarGrid.appendChild(emptyDay);
      }

      // DÃ­as del mes
      for (let day = 1; day <= daysInMonth; day++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        dayElement.textContent = day;
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

        // Resaltar dÃ­a actual
        if (day === currentDay) {
          dayElement.classList.add('today');
        }

        // Marcar dÃ­as con desafÃ­os completados
        const completedChallenges = JSON.parse(localStorage.getItem(`challenges-${dateStr}`)) || [];
        if (completedChallenges.length > 0) {
          dayElement.classList.add('completed');
        }

        // Solo dÃ­as pasados o actuales son clicables
        if (day <= currentDay) {
          dayElement.classList.add('clickable');
          dayElement.addEventListener('click', () => loadChallenges(dateStr));
        } else {
          dayElement.classList.add('disabled');
        }

        calendarGrid.appendChild(dayElement);
      }
    }

    // Cargar desafÃ­os para una fecha
    function loadChallenges(dateStr) {
      const cardsContainer = document.querySelector('.cards');
      cardsContainer.innerHTML = '';

      const challenges = challengesByDate[dateStr] || [
        { id: 0, title: 'Sin desafÃ­os', description: 'No hay desafÃ­os disponibles para este dÃ­a.' }
      ];

      const completedChallenges = JSON.parse(localStorage.getItem(`challenges-${dateStr}`)) || [];

      challenges.forEach(challenge => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.challengeId = challenge.id;
        if (completedChallenges.includes(challenge.id)) {
          card.classList.add('completed');
        }

        card.innerHTML = `
          <h3>${challenge.title}</h3>
          <p>${challenge.description}</p>
          <div class="icon-buttons">
            <span class="tick">âœ…</span>
            <span class="cross">âŒ</span>
          </div>
        `;

        cardsContainer.appendChild(card);
      });

      // AÃ±adir event listeners a los botones
      document.querySelectorAll('.tick').forEach(btn => {
        btn.addEventListener('click', () => {
          const card = btn.closest('.card');
          card.classList.toggle('completed');
          updateLocalStorage(dateStr, card.dataset.challengeId, card.classList.contains('completed'));
        });
      });

      document.querySelectorAll('.cross').forEach(btn => {
        btn.addEventListener('click', () => {
          const card = btn.closest('.card');
          card.classList.remove('completed');
          updateLocalStorage(dateStr, card.dataset.challengeId, false);
        });
      });
    }

    // Actualizar localStorage
    function updateLocalStorage(dateStr, challengeId, isCompleted) {
      let completedChallenges = JSON.parse(localStorage.getItem(`challenges-${dateStr}`)) || [];
      if (isCompleted) {
        if (!completedChallenges.includes(Number(challengeId))) {
          completedChallenges.push(Number(challengeId));
        }
      } else {
        completedChallenges = completedChallenges.filter(id => id !== Number(challengeId));
      }
      localStorage.setItem(`challenges-${dateStr}`, JSON.stringify(completedChallenges));

      // Actualizar calendario
      const dayElement = document.querySelector(`.calendar-day.clickable[data-date="${dateStr}"]`);
      if (dayElement) {
        if (completedChallenges.length > 0) {
          dayElement.classList.add('completed');
        } else {
          dayElement.classList.remove('completed');
        }
      }
    }

    // Inicializar
    generateCalendar();
    loadChallenges('2025-05-13');
  </script>
</body>
</html>